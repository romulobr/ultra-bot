(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,a){e.exports=a(87)},53:function(e,t,a){},55:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(43),c=a.n(s),i=(a(53),a(16)),o=a(17),u=a(21),l=a(18),m=a(20),d=a(14),p=(a(55),a(19)),h=a.n(p);var b=function(e){h.a.erase("feathers-jwt"),e({type:"NOT_AUTHENTICATED"})},v=a(24),_=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.authenticate()}},{key:"getConnectedClassName",value:function(e){return e.user?"welcome-panel__status-bar welcome-panel__status-bar__".concat(e.user.origin):"welcome-panel__status-bar welcome-panel__status-bar__hidden"}},{key:"getDisconnectedClassName",value:function(e){return e.user?"welcome-panel__status-bar welcome-panel__status-bar__hidden":"welcome-panel__status-bar"}},{key:"getImageDivStyle",value:function(e){return e.user?{backgroundImage:"url(".concat(e.user.profilePictureUrl,")")}:{}}},{key:"render",value:function(){return r.a.createElement("div",{className:"welcome-panel"},r.a.createElement("div",{className:this.getDisconnectedClassName(this.props)},r.a.createElement("div",{className:"welcome-panel__status-bar__disconnected-information"},"You are not connected yet"),r.a.createElement("div",{className:"welcome-panel__status-bar__disconnected-information"},r.a.createElement("a",{href:"/auth/twitch"},"Connect with twitch")),r.a.createElement("div",{className:"welcome-panel__status-bar__disconnected-information"},r.a.createElement("a",{href:"/auth/youtube"},"Connect with youtube"))),r.a.createElement("div",{className:this.getConnectedClassName(this.props)},r.a.createElement("div",{className:"welcome-panel__status-bar__profile-picture",style:this.getImageDivStyle(this.props)}),r.a.createElement("div",{className:"welcome-panel__status-bar__origin "},this.props.hasUser&&this.props.user.origin),r.a.createElement("div",{className:"welcome-panel__status-bar__name"},this.props.hasUser&&this.props.user.displayName),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.deauthenticate},"Disconnect"))))}}]),t}(n.Component);var E=Object(v.b)(function(e){return Object(d.a)({},e.authentication,{hasUser:!!e.authentication.user})},function(e){return{deauthenticate:function(){b(e)},authenticate:function(){e({type:"AUTHENTICATION"})}}})(_),f=a(3),O=(a(59),a(29)),j=a.n(O),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).changeValue=a.changeValue.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"changeValue",value:function(e){this.props.setValue(e.currentTarget.value)}},{key:"render",value:function(){this.props.getErrorMessage();return r.a.createElement("input",{className:this.props.className,onChange:this.changeValue,type:"text",value:this.props.getValue()||""})}}]),t}(r.a.Component),g=Object(O.withFormsy)(I),T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).disableButton=a.disableButton.bind(Object(f.a)(Object(f.a)(a))),a.enableButton=a.enableButton.bind(Object(f.a)(Object(f.a)(a))),a.createMediaItem=a.createMediaItem.bind(Object(f.a)(Object(f.a)(a))),a.deleteMediaItem=a.deleteMediaItem.bind(Object(f.a)(Object(f.a)(a))),a.renderItems=a.renderItems.bind(Object(f.a)(Object(f.a)(a))),a.toMediaItemJSX=a.toMediaItemJSX.bind(Object(f.a)(Object(f.a)(a))),a.submit=a.submit.bind(Object(f.a)(Object(f.a)(a))),a.state={canSubmit:!1,items:a.props.items,deletedItems:[],newItems:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMedia()}},{key:"toMediaItemJSX",value:function(e,t){return r.a.createElement("div",{className:"media-panel media-panel__media-item",key:"media-item-"+t},r.a.createElement(g,{className:"media-panel__media-item__command",name:"media-item-command-"+t,value:e.command}),r.a.createElement("div",{className:"media-panel__media-item__arrow"}," \u27a1"),r.a.createElement(g,{className:"media-panel__media-item__url",name:"media-item-url-"+t,value:e.url}),r.a.createElement("div",{className:"media-panel__media-item__delete-button",onClick:this.deleteMediaItem(t)},"Delete"))}},{key:"createMediaItem",value:function(){var e=this.state.items;e.push({command:"",url:""}),this.setState(Object(d.a)({},this.state,{items:e}))}},{key:"deleteMediaItem",value:function(e){var t=this;return function(){console.log("deleted item #"+e);var a=t.state.items,n=a.slice(0,e).concat(a.slice(e+1,a.length));t.setState(Object(d.a)({},t.state,{items:n}))}}},{key:"submit",value:function(){this.props.saveMediaList(this.state.items)}},{key:"disableButton",value:function(){this.setState({canSubmit:!1})}},{key:"enableButton",value:function(){this.setState({canSubmit:!0})}},{key:"renderItems",value:function(e){return console.log("items:",e),e?e.map(this.toMediaItemJSX):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"media-panel"},r.a.createElement("h2",null,"Media List"),r.a.createElement(j.a,{onValidSubmit:this.submit,onValid:this.enableButton,onInvalid:this.disableButton},r.a.createElement("div",{className:"media-panel__media-list"},this.renderItems(this.state.items)),r.a.createElement("button",{onClick:this.createMediaItem},"New"),r.a.createElement("button",{type:"submit",disabled:!this.state.canSubmit},"Save")))}}]),t}(n.Component);var w=Object(v.b)(function(e){return{items:e.media.items}},function(e){return{saveMediaList:function(t){e({type:"SAVE_MEDIA",items:t})},fetchMedia:function(t){e({type:"FETCH_MEDIA"})}}})(T),y=(a(64),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(w,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(22),A={connected:!1};var x=function(e,t){switch(t.type){case"AUTHENTICATION_SUCCESS":return console.log("success:",t),{connected:!0,user:t.user};case"AUTHENTICATION_FAILED":return{connected:!1,connectionError:Object(d.a)({},t.error)};case"NOT_AUTHENTICATED":return{connected:!1};default:return e||A}},k={items:[{command:"0",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"},{command:"1",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"},{command:"2",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"},{command:"3",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"},{command:"4",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"},{command:"5",url:"https://shapeshed.com/examples/HTML5-video-element/video/320x240.m4v"}]};var M=function(e,t){switch(t.type){case"ADD_MEDIA_ITEM":console.log("added media:",t);var a=e.items.slice(0);return a.push(t.mediaItem),{items:a};case"DELETE_MEDIA_ITEM":console.log("deleted media:",t);var n=e.items.slice(0,t.mediaIndex);return Array.prototype.push.apply(n,e.items.slice(t.mediaIndex+1,e.items.lenght-1)),{items:n};case"MEDIA_FETCHED":return console.log("fetched media:",t),{items:[]};default:return e||k}},C=a(47),D=a(7),S=a.n(D),H=a(6),U=a(23),V=a.n(U),L=S.a.mark(R),B=S.a.mark(F);function R(){var e,t;return S.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e=h.a.get("feathers-jwt"),console.log("found auth cookie"),e){a.next=8;break}return a.next=6,Object(H.a)({type:"NOT_AUTHENTICATED"});case 6:return console.log("could not find jwt cookie, user is not authenticated"),a.abrupt("return");case 8:return console.log("querying for my user",e),a.next=11,V.a.get("http://localhost:3000/users",{headers:{Authorization:"Bearer "+e}});case 11:return t=a.sent,a.next=14,Object(H.a)({type:"AUTHENTICATION_SUCCESS",user:t.data});case 14:console.log("got a response:",t.data),a.next=22;break;case 17:return a.prev=17,a.t0=a.catch(0),a.next=21,Object(H.a)({type:"AUTHENTICATION_FAILED",error:a.t0});case 21:console.log("got an error:",a.t0);case 22:case"end":return a.stop()}},L,this,[[0,17]])}function F(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.b)("AUTHENTICATION",R);case 2:case"end":return e.stop()}},B,this)}var J=F,X=S.a.mark(W),z=S.a.mark(q);function P(e){var t={hasErrors:!1,items:[]};return e.forEach(function(e){e.url&&e.command?t.items.push(e):(t.item.push(Object(d.a)({},e,{hasValidationError:!0,validationError:"no-blank"})),t.hasErrors=!0)}),t}function W(e){var t,a,n;return S.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("trying to save media"),r.prev=1,!(t=P(e.items)).hasErrors){r.next=9;break}return r.next=6,Object(H.a)({type:"MEDIA_VALIDATION_ERRORS",validation:t});case 6:return r.abrupt("return");case 9:if(a=h.a.get("feathers-jwt")){r.next=14;break}return r.next=13,Object(H.a)({type:"NOT_AUTHENTICATED"});case 13:return r.abrupt("return");case 14:return r.next=16,V.a.post("http://localhost:3000/media",{items:e.items},{headers:{Authorization:"Bearer "+a}});case 16:return n=r.sent,r.next=19,Object(H.a)({type:"MEDIA_SAVED",response:n});case 19:console.log(n);case 20:r.next=27;break;case 22:return r.prev=22,r.t0=r.catch(1),r.next=26,Object(H.a)({type:"MEDIA_SAVING_ERROR",error:r.t0});case 26:console.log("got an error:",r.t0);case 27:case"end":return r.stop()}},X,this,[[1,22]])}function q(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.b)("SAVE_MEDIA",W);case 2:case"end":return e.stop()}},z,this)}var G=q,Y=S.a.mark(K),$=S.a.mark(Q);function K(e){var t,a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("trying to save media"),e.prev=1,t=h.a.get("feathers-jwt")){e.next=7;break}return e.next=6,Object(H.a)({type:"NOT_AUTHENTICATED"});case 6:return e.abrupt("return");case 7:return e.next=9,V.a.get("http://localhost:3000/media",{headers:{Authorization:"Bearer "+t}});case 9:return a=e.sent,e.next=12,Object(H.a)({type:"MEDIA_FETCHED",response:a});case 12:console.log(a),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(1),e.next=19,Object(H.a)({type:"MEDIA_FETCH_ERROR",error:e.t0});case 19:console.log("got an error:",e.t0);case 20:case"end":return e.stop()}},Y,this,[[1,15]])}function Q(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.b)("FETCH_MEDIA",K);case 2:case"end":return e.stop()}},$,this)}var Z=Q,ee=a(89),te=Object(C.a)(),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||N.d,ne=Object(N.e)(Object(N.c)({authentication:x,media:M,form:ee.a}),ae(Object(N.a)(te)));te.run(J),te.run(G),te.run(Z),c.a.render(r.a.createElement(v.a,{store:ne},r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,2,1]]]);
//# sourceMappingURL=main.b21cb896.chunk.js.map