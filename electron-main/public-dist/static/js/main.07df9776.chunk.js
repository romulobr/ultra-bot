(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(56),c=n.n(i),o=(n(67),n(11)),s=n(12),u=n(15),d=n(13),l=n(14),p=n(6),m=n(17),h=n(8),b=n(25),f=n.n(b),O=n(23),k=n(38),v=n.n(k);var E=function(e){v.a.erase("feathers-jwt"),e({type:"NOT_AUTHENTICATED"})},j=n(5),g=Object(j.createAction)("AUTHENTICATION"),_=Object(j.createAction)("AUTHENTICATION_SUCCESS"),T=Object(j.createAction)("AUTHENTICATION_FAILED"),C=Object(j.createAction)("NOT_AUTHENTICATED"),x={authenticationSuccess:_,authenticationFailed:T,notAuthenticated:C,authentication:g},A=n(32),y=n.n(A),I=Object(j.createAction)("EDIT_TOKEN"),w=Object(j.createAction)("EDIT_TOKEN_CANCELLED"),N=Object(j.createAction)("SAVE_TOKEN"),M=Object(j.createAction)("SAVE_TOKEN_SUCCESS"),F=Object(j.createAction)("SAVE_TOKEN_FAILED"),S=Object(j.createAction)("FETCH_STREAM_ELEMENTS_TOKEN"),D=Object(j.createAction)("FETCH_STREAM_ELEMENTS_TOKEN_SUCCESS"),R=Object(j.createAction)("FETCH_STREAM_ELEMENTS_TOKEN_FAILED"),L=Object(j.createAction)("STREAM_ELEMENTS_TOKEN_VERIFICATION_SUCCESS"),V={editToken:I,editTokenCancelled:w,saveToken:N,saveTokenFailed:F,saveTokenSuccess:M,fetchToken:S,fetchTokenFailed:R,fetchTokenSuccess:D,tokenVerificationFailed:Object(j.createAction)("STREAM_ELEMENTS_TOKEN_VERIFICATION_FAILED"),tokenVerificationSuccess:L},P=O.b.div({hidden:{opacity:0},visible:{opacity:1}}),H=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).onTokenTextAreaChange=function(e){n.setState({token:e.target.value})},n.state={token:e.token},n.editToken=e.editToken.bind(Object(h.a)(Object(h.a)(n))),e.fetchToken(),n.textAreaRef=r.a.createRef(),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.token=this.props.token,!e.isEditing&&this.props.isEditing&&(this.textAreaRef.current.focus(),this.textAreaRef.current.select())}},{key:"editToken",value:function(){var e=this;this.setState(Object(p.a)({},this.state,{token:this.props.token}),function(){e.props.editToken()})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,{className:y.a.tokenForm+" "+(this.props.isEditing?"":y.a.hidden),pose:this.props.isEditing?"visible":"hidden"},r.a.createElement("textarea",{ref:this.textAreaRef,value:this.state.token,onChange:this.onTokenTextAreaChange}),r.a.createElement("div",{className:y.a.buttons+" "+(this.props.isEditing?"":y.a.hidden)},r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.saveToken(this.state.token)},"Save")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.cancelTokenEdition},"Cancel")))),r.a.createElement("div",{className:f.a.accountInformation,style:{backgroundImage:"url(img/stream-elements.jpg)",filter:this.props.token?"":"grayscale(100%)"}},r.a.createElement("div",{className:y.a.token},this.props.isLoading?"Loading...":this.props.tokenUser||(this.props.token?"Ready":"No Token"))),r.a.createElement("div",null,!this.props.isEditing&&r.a.createElement("button",{disabled:this.props.isLoading,onClick:this.props.editToken},this.props.token?"Change Token":"Add Token")))}}]),t}(a.Component);var U=Object(m.b)(function(e){return Object(p.a)({},e.streamElements)},function(e){return{fetchToken:function(){e(V.fetchToken())},editToken:function(){e(V.editToken())},cancelTokenEdition:function(){e(V.editTokenCancelled())},saveToken:function(t){return function(){return e(V.saveToken(t))}}}})(H),B=O.b.div({enter:{y:0,opacity:1,delay:300,transition:{y:{type:"spring",stiffness:1e3,damping:15},default:{duration:300}}},exit:{y:50,opacity:0,transition:{duration:150}}}),z=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).poolToken=e.poolToken.bind(Object(h.a)(Object(h.a)(e))),e}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.authenticate()}},{key:"poolToken",value:function(e){var t=this;setTimeout(function(){t.props.authenticate(),t.props.connected?e():t.poolToken(e)},1e3)}},{key:"render",value:function(){var e=this,t=this.props.connected?r.a.createElement(B,{initialPose:"hidden",key:"connected-panel"},r.a.createElement("div",{className:f.a.information},r.a.createElement("div",null,r.a.createElement("div",{className:f.a.accountInformation,style:this.props.user&&{backgroundImage:"url(".concat(this.props.user.profilePictureUrl,")")}},r.a.createElement("div",{className:f.a.userName},this.props.hasUser&&this.props.user.displayName)),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.props.deauthenticate},"Disconnect"))),r.a.createElement(U,{isEditing:this.props.isEditing,token:this.props.token,editToken:this.props.editToken}))):r.a.createElement(B,{className:f.a.information+" "+f.a.offline,key:"disconnected-panel"},r.a.createElement("div",null,"Welcome - You are not connected yet"),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var t=window.open("/api/auth/twitch","_blank","nodeIntegration=no");e.poolToken(function(){t.close()})}},"Connect with twitch")),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e=window.open("/api/auth/youtube","_blank","nodeIntegration=no","width=200, height=100");console.log(e)}},"Connect with youtube")));return r.a.createElement("div",{className:f.a.welcomePanel},r.a.createElement(O.a,null,t))}}]),t}(a.Component);var K=Object(m.b)(function(e){return Object(p.a)({},e.authentication,{hasUser:!!e.authentication.user})},function(e){return{deauthenticate:function(){E(e)},authenticate:function(){e(x.authentication())}}})(z),J=n(33),X=n(28),W=n.n(X),Z=n(40),Y=n.n(Z),q=n(27),G=Object(j.createAction)("SAVE_MEDIA"),Q=Object(j.createAction)("MEDIA_VALIDATION_FAILED"),$=Object(j.createAction)("MEDIA_SAVE_FAILED"),ee=Object(j.createAction)("MEDIA_SAVED"),te=Object(j.createAction)("FETCH_MEDIA"),ne=Object(j.createAction)("MEDIA_FETCHED"),ae=Object(j.createAction)("MEDIA_FETCH_FAILED"),re=Object(j.createAction)("MEDIA_IMPORTED"),ie=Object(j.createAction)("IMPORT_MEDIA"),ce=Object(j.createAction)("OPEN_MEDIA_FOLDER"),oe=Object(j.createAction)("IMPORT_MEDIA_FAILED"),se={saveMedia:G,mediaValidationFailed:Q,mediaSaved:ee,mediaSaveFailed:$,fetchMedia:te,mediaFetched:ne,mediaFetchFailed:ae,mediaImported:re,openMediaFolder:ce,importMedia:ie,importMediaFailed:oe};var ue=function(e){q.ipcRenderer.on("mediaImported",function(t,n){e(re({items:n}))})},de=n(44),le=n.n(de),pe=O.b.div({hidden:{left:0,opacity:0},visible:{left:0,opacity:1}}),me=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(pe,{className:this.props.hidden?le.a.appViewHidden:le.a.appView,pose:this.props.hidden?"hidden":"visible"},this.props.children)}}]),t}(a.Component),he=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).createMediaItem=n.createMediaItem.bind(Object(h.a)(Object(h.a)(n))),n.deleteMediaItems=n.deleteMediaItems.bind(Object(h.a)(Object(h.a)(n))),n.renderItems=n.renderItems.bind(Object(h.a)(Object(h.a)(n))),n.toMediaItemJSX=n.toMediaItemJSX.bind(Object(h.a)(Object(h.a)(n))),n.toggleCheckedForDeletion=n.toggleCheckedForDeletion.bind(Object(h.a)(Object(h.a)(n))),n.toggleAllCheckedForDeletion=n.toggleAllCheckedForDeletion.bind(Object(h.a)(Object(h.a)(n))),n.handleCommandChange=n.handleCommandChange.bind(Object(h.a)(Object(h.a)(n))),n.handleMediaInputChange=n.handleMediaInputChange.bind(Object(h.a)(Object(h.a)(n))),n.state={items:n.props.items,checkedForDeletion:[]},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.registerRendererEvents()}},{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.items,checkedForDeletion:[]})}},{key:"toggleCheckedForDeletion",value:function(e){var t=Object(J.a)(this.state.checkedForDeletion),n=this.state.checkedForDeletion.indexOf(e);-1!==n?t.splice(n,1):t.push(e),this.setState({items:this.state.items,checkedForDeletion:t})}},{key:"toggleAllCheckedForDeletion",value:function(){var e;e=this.state.checkedForDeletion.length===this.state.items.length?[]:Object(J.a)(this.state.items.keys()),this.setState({items:this.state.items,checkedForDeletion:e})}},{key:"toMediaItemJSX",value:function(e,t){var n=this;return r.a.createElement("tr",{key:"media-item-"+t},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:this.state.checkedForDeletion.includes(t),onChange:function(){n.toggleCheckedForDeletion(t)}})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"media-item-command-"+t,value:e.command,onChange:this.handleCommandChange})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"media-item-url-"+t,value:e.url,onChange:this.handleMediaInputChange})))}},{key:"createMediaItem",value:function(){var e=this.state.items;e.push({command:"",url:""}),this.setState(Object(p.a)({},this.state,{items:e}))}},{key:"deleteMediaItems",value:function(){var e=Object(J.a)(this.state.items);this.state.checkedForDeletion.sort(function(e,t){return t-e}).forEach(function(t){e.splice(t,1)}),this.setState({items:e,checkedForDeletion:[]})}},{key:"handleCommandChange",value:function(e){var t=Object(J.a)(this.state.items);t[e.target.name.split("media-item-command-")[1]].command=e.target.value,this.setState(Object(p.a)({},this.state,{items:t}))}},{key:"handleMediaInputChange",value:function(e){var t=Object(J.a)(this.state.items);t[e.target.name.split("media-item-url-")[1]].command=e.target.value,this.setState(Object(p.a)({},this.state,{items:t}))}},{key:"renderItems",value:function(e){return e?e.map(this.toMediaItemJSX):null}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:W.a.mediaPanel},r.a.createElement(me,{className:Y.a.loader,hidden:!this.props.loading},r.a.createElement("svg",{className:Y.a.circular},r.a.createElement("circle",{className:Y.a.path,cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"}))),r.a.createElement("div",{className:W.a.mediaList},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:this.toggleAllCheckedForDeletion},"Media"),r.a.createElement("th",null,"Command"),r.a.createElement("th",null,"File"))),r.a.createElement("tbody",null,this.renderItems(this.state.items)))),r.a.createElement("button",{className:W.a.button,disabled:this.props.loading,type:"button",onClick:this.deleteMediaItems},"Delete"),r.a.createElement("button",{className:W.a.button,disabled:this.props.loading,type:"button",onClick:this.createMediaItem},"New"),r.a.createElement("button",{className:W.a.button,type:"button",disabled:this.props.loading,onClick:function(){e.props.saveMedia(e.state.items)}},"Save"),r.a.createElement("button",{className:W.a.button,type:"button",disabled:this.props.loading,onClick:this.props.importMedia},"Import from media folder"),r.a.createElement("button",{className:W.a.button,type:"button",disabled:this.props.loading,onClick:this.props.openMediaFolder},"Open media folder"))}}]),t}(a.Component);var be=Object(m.b)(function(e){return Object(p.a)({},e.media,{user:e.users})},function(e){return{saveMedia:function(t){e(se.saveMedia(t))},fetchMedia:function(){e(se.fetchMedia())},importMedia:function(){e(se.importMedia())},openMediaFolder:function(){e(se.openMediaFolder())},registerRendererEvents:function(){ue(e)}}})(he),fe=n(45),Oe=n.n(fe),ke={playMedia:Object(j.createAction)("PLAY_MEDIA")},ve=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"renderMediaItems",value:function(e){var t=this;return e.map(function(e,n){return r.a.createElement("button",{className:Oe.a.mediaItem,key:"media-item-".concat(n),onClick:function(){t.props.playMedia(e)}},e.command)})}},{key:"render",value:function(){return r.a.createElement("div",{className:Oe.a.mediaRemote},this.renderMediaItems(this.props.items))}}]),t}(a.Component);var Ee=Object(m.b)(function(e){return Object(p.a)({},e.media,{user:e.users})},function(e){return{playMedia:function(t){e(ke.playMedia(t))}}})(ve),je=n(46),ge=n.n(je),_e=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:ge.a.chatControls},r.a.createElement("button",{onClick:this.props.connectToChat,className:ge.a.button},"Connect to Chat"))}}]),t}(a.Component);var Te=Object(m.b)(function(e){return Object(p.a)({},e.chat)},function(e){return{connectToChat:function(){e({type:"CONNECT_TO_CHAT"})},disconnectFromChat:function(){e({type:"DISCONNECT_FROM_CHAT"})}}})(_e),Ce={navigateTo:Object(j.createAction)("NAVIGATE_TO")},xe=n(30),Ae=n.n(xe),ye=O.b.div({enter:{opacity:1,transition:{y:{type:"spring",stiffness:1e3,damping:15},default:{duration:300}}},exit:{opacity:0,transition:{duration:300}}}),Ie=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:Ae.a.navigator},r.a.createElement("div",{className:Ae.a.viewPicker},r.a.createElement("div",{className:Ae.a.navigationItem,onClick:function(){e.props.navigateTo("authentication")}},"\u2699 Settings"),r.a.createElement("div",{className:Ae.a.navigationItem,onClick:function(){e.props.navigateTo("media")}},"\ud83d\udcfa Media"),r.a.createElement("div",{className:Ae.a.navigationItem,onClick:function(){e.props.navigateTo("media-remote")}},"\ud83d\udcf1 Remote"),r.a.createElement("div",{className:Ae.a.navigationItem,onClick:function(){e.props.navigateTo("chat-controls")}},"\ud83d\udcac Chat-Bot")),r.a.createElement(O.a,null,"authentication"===this.props.view&&r.a.createElement(ye,{key:"authentication"},r.a.createElement(K,null)),"media-remote"===this.props.view&&r.a.createElement(ye,{key:"media-remote"},r.a.createElement(Ee,null)),"chat-controls"===this.props.view&&r.a.createElement(ye,{key:"chatControls"},r.a.createElement(Te,null)),"media"===this.props.view&&r.a.createElement(ye,{key:"media"},r.a.createElement(be,null))))}}]),t}(a.Component),we=Object(m.b)(function(e){return Object(p.a)({},e.navigator)},function(e){return{navigateTo:function(t){return e(Ce.navigateTo(t))}}})(Ie),Ne=(n(86),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(we,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me,Fe,Se=n(29),De=n(7),Re=Object(j.createReducer)((Me={},Object(De.a)(Me,x.authenticationSuccess,function(e,t){return Object(p.a)({},e,{connected:!0,loading:!1,user:t.user})}),Object(De.a)(Me,x.authenticationFailed,function(e,t){return Object(p.a)({},e,{connected:!1,loading:!1,connectionError:Object(p.a)({},t.error)})}),Object(De.a)(Me,x.notAuthenticated,function(e,t){return Object(p.a)({},e,{connected:!1,loading:!1})}),Me),{connected:!1,loading:!0,token:"",isEditing:!1}),Le=Object(j.createReducer)((Fe={},Object(De.a)(Fe,se.saveMedia,function(e,t){return Object(p.a)({},e,{loading:!0})}),Object(De.a)(Fe,se.mediaValidationFailed,function(e,t){return Object(p.a)({},e,{loading:!1})}),Object(De.a)(Fe,se.mediaSaved,function(e,t){return{items:t.items,loading:!1}}),Object(De.a)(Fe,se.mediaSaveFailed,function(e,t){return Object(p.a)({},e,{loading:!1,error:t})}),Object(De.a)(Fe,se.fetchMedia,function(e,t){return Object(p.a)({},e,{loading:!0})}),Object(De.a)(Fe,se.mediaFetched,function(e,t){return{items:t.items,loading:!1}}),Object(De.a)(Fe,se.mediaImported,function(e,t){return{items:e.items.concat(t.items),loading:!1}}),Fe),{items:[],loading:!0}),Ve=n(59),Pe=n.n(Ve),He={connected:!1,loading:!1};var Ue,Be=function(e,t){switch(t.type){case"CONNECT_TO_CHAT":case"DISCONNECT_FROM_CHAT":return{connected:!1,loading:!0};case"CONNECTED_TO_CHAT":return{connected:!0,loading:!1};case"DISCONNECTED_FROM_CHAT":case"CONNECT_TO_CHAT_FAILED":return{connected:!1,loading:!1};default:return e||He}},ze=Object(j.createReducer)((Ue={},Object(De.a)(Ue,V.fetchToken,function(e,t){return Object(p.a)({},e,{isEditing:!1,isLoading:!0})}),Object(De.a)(Ue,V.fetchTokenSuccess,function(e,t){return Object(p.a)({},e,{isEditing:!1,isLoading:!1,token:t.token})}),Object(De.a)(Ue,V.fetchTokenFailed,function(e,t){return Object(p.a)({},e,{error:t,isEditing:!1,isLoading:!1,tokenUser:""})}),Object(De.a)(Ue,V.editToken,function(e){return Object(p.a)({},e,{isEditing:!0,isLoading:!1})}),Object(De.a)(Ue,V.editTokenCancelled,function(e){return Object(p.a)({},e,{isEditing:!1})}),Object(De.a)(Ue,V.saveToken,function(e){return Object(p.a)({},e,{isEditing:!1})}),Object(De.a)(Ue,V.saveTokenSuccess,function(e,t){return Object(p.a)({},e,{token:t,isEditing:!1,tokenUser:""})}),Object(De.a)(Ue,V.saveTokenFailed,function(e,t){return Object(p.a)({},e,{isEditing:!1,error:t})}),Object(De.a)(Ue,V.tokenVerificationSuccess,function(e,t){return Object(p.a)({},e,{isEditing:!1,tokenUser:t})}),Object(De.a)(Ue,V.tokenVerificationFailed,function(e,t){return Object(p.a)({},e,{isEditing:!1,tokenUser:"Bad Token?"})}),Ue),{token:"",isEditing:!1,isLoading:!0}),Ke=n(61),Je=n(4),Xe=n.n(Je),We="http://localhost:3000/api/media",Ze="http://localhost:3000/api/users",Ye="http://localhost:3000/message",qe="http://localhost:3000/api/stream-elements-token",Ge="http://localhost:3000/media",Qe="https://api.streamelements.com/kappa/v2/users/current",$e=n(3),et=n(16),tt=n.n(et);var nt=function(){return v.a.get("feathers-jwt")},at=Xe.a.mark(it),rt=Xe.a.mark(ct);function it(){var e,t;return Xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e=nt()){n.next=6;break}return n.next=5,Object($e.a)(x.notAuthenticated());case 5:return n.abrupt("return");case 6:return n.next=8,tt.a.get(Ze,{headers:{Authorization:"Bearer "+e}});case 8:return t=n.sent,n.next=11,Object($e.a)(x.authenticationSuccess({user:t.data}));case 11:return n.next=13,Object($e.a)(te());case 13:n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Object($e.a)(x.authenticationFailed({error:n.t0}));case 19:console.log("got an error:",n.t0);case 20:case"end":return n.stop()}},at,this,[[0,15]])}function ct(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(x.authentication,it);case 2:case"end":return e.stop()}},rt,this)}var ot=ct,st=Xe.a.mark(lt),ut=Xe.a.mark(pt);function dt(e){var t={hasErrors:!1,items:[]};return e.forEach(function(e){e.url&&e.command?t.items.push(e):(t.items.push(Object(p.a)({},e,{hasValidationError:!0,validationError:"no-blank"})),t.hasErrors=!0)}),t}function lt(e){var t,n,a;return Xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("trying to save media \n\n",e),r.prev=1,!(t=dt(e.payload)).hasErrors){r.next=8;break}return r.next=6,Object($e.a)(se.mediaValidationFailed(t));case 6:r.next=19;break;case 8:if(n=nt()){r.next=13;break}return r.next=12,Object($e.a)(C());case 12:return r.abrupt("return");case 13:return console.log("saving media: ",e),r.next=16,tt.a.put(We,{items:e.payload},{headers:{Authorization:"Bearer "+n}});case 16:return a=r.sent,r.next=19,Object($e.a)(se.mediaSaved({items:a.data.items}));case 19:r.next=26;break;case 21:return r.prev=21,r.t0=r.catch(1),console.log("error saving media",r.t0),r.next=26,Object($e.a)(se.mediaSaveFailed({error:r.t0}));case 26:case"end":return r.stop()}},st,this,[[1,21]])}function pt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(se.saveMedia,lt);case 2:case"end":return e.stop()}},ut,this)}var mt=pt,ht=Xe.a.mark(ft),bt=Xe.a.mark(Ot);function ft(){var e;return Xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("opening media folder"),t.prev=1,e=nt()){t.next=7;break}return t.next=6,Object($e.a)({type:"NOT_AUTHENTICATED"});case 6:return t.abrupt("return");case 7:q.ipcRenderer.send("openMediaFolder",e),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Object($e.a)({type:"OPEN_MEDIA_FOLDER_ERROR",error:t.t0});case 14:console.log("got an error:",t.t0);case 15:case"end":return t.stop()}},ht,this,[[1,10]])}function Ot(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)("OPEN_MEDIA_FOLDER",ft);case 2:case"end":return e.stop()}},bt,this)}var kt=Ot,vt=Xe.a.mark(jt),Et=Xe.a.mark(gt);function jt(){var e,t;return Xe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e=nt()){n.next=6;break}return n.next=5,Object($e.a)(C());case 5:return n.abrupt("return");case 6:return n.next=8,tt.a.get(We,{headers:{Authorization:"Bearer "+e}});case 8:if(!(t=n.sent).data||!t.data[0]){n.next=14;break}return n.next=12,Object($e.a)(se.mediaFetched({items:t.data&&t.data[0].items||[]}));case 12:n.next=18;break;case 14:return n.next=16,tt.a.post(We,{items:[]},{headers:{Authorization:"Bearer "+e}});case 16:return n.next=18,Object($e.a)(se.fetchMedia());case 18:n.next=25;break;case 20:return n.prev=20,n.t0=n.catch(0),n.next=24,Object($e.a)(se.mediaFetchFailed({error:n.t0}));case 24:console.log("got an error:",n.t0);case 25:case"end":return n.stop()}},vt,this,[[0,20]])}function gt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(se.fetchMedia,jt);case 2:case"end":return e.stop()}},Et,this)}var _t=gt,Tt=Xe.a.mark(xt),Ct=Xe.a.mark(At);function xt(){var e;return Xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("trying to importMedia"),t.prev=1,e=nt()){t.next=7;break}return t.next=6,Object($e.a)(C());case 6:return t.abrupt("return");case 7:q.ipcRenderer.send("importMedia",e),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Object($e.a)(se.importMediaFailed({error:t.t0}));case 14:console.log("got an error:",t.t0);case 15:case"end":return t.stop()}},Tt,this,[[1,10]])}function At(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)("IMPORT_MEDIA",xt);case 2:case"end":return e.stop()}},Ct,this)}var yt=At,It=Xe.a.mark(Nt),wt=Xe.a.mark(Mt);function Nt(){var e;return Xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("trying to connect to chat"),t.prev=1,e=nt()){t.next=7;break}return t.next=6,Object($e.a)({type:"NOT_AUTHENTICATED"});case 6:return t.abrupt("return");case 7:q.ipcRenderer.send("connectToChat",e),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Object($e.a)({type:"CONNECT_TO_CHAT_ERROR",error:t.t0});case 14:console.log("got an error:",t.t0);case 15:case"end":return t.stop()}},It,this,[[1,10]])}function Mt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)("CONNECT_TO_CHAT",Nt);case 2:case"end":return e.stop()}},wt,this)}var Ft=Mt,St=Xe.a.mark(Rt),Dt=Xe.a.mark(Lt);function Rt(e){return Xe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,tt.a.post(Ye,{media:"".concat(Ge,"/").concat(e.payload.url)});case 3:t.next=10;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object($e.a)(ke.mediaFetchFailed({error:t.t0}));case 9:console.log("got an error:",t.t0);case 10:case"end":return t.stop()}},St,this,[[0,5]])}function Lt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(ke.playMedia,Rt);case 2:case"end":return e.stop()}},Dt,this)}var Vt=Lt,Pt=Xe.a.mark(Ut),Ht=Xe.a.mark(Bt);function Ut(){var e,t,n;return Xe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e=nt()){a.next=6;break}return a.next=5,Object($e.a)(C());case 5:return a.abrupt("return");case 6:return a.next=8,tt.a.get(qe,{headers:{Authorization:"Bearer "+e}});case 8:if(!((t=a.sent).data&&t.data[0]&&t.data[0].token)){a.next=27;break}return a.next=12,Object($e.a)(V.fetchTokenSuccess({token:t.data[0].token}));case 12:if(a.prev=12,""===t.data[0].token){a.next=19;break}return a.next=16,tt.a.get(Qe,{headers:{Authorization:"Bearer "+t.data[0].token}});case 16:return n=a.sent,a.next=19,Object($e.a)(V.tokenVerificationSuccess(n.data.channels[0].displayName));case 19:a.next=25;break;case 21:return a.prev=21,a.t0=a.catch(12),a.next=25,Object($e.a)(V.tokenVerificationFailed({error:a.t0}));case 25:a.next=31;break;case 27:return a.next=29,tt.a.post(qe,{token:""},{headers:{Authorization:"Bearer "+e}});case 29:return a.next=31,Object($e.a)(V.fetchToken());case 31:a.next=38;break;case 33:return a.prev=33,a.t1=a.catch(0),a.next=37,Object($e.a)(V.fetchTokenFailed({error:a.t1}));case 37:console.log("got an error:",a.t1);case 38:case"end":return a.stop()}},Pt,this,[[0,33],[12,21]])}function Bt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(V.fetchToken,Ut);case 2:case"end":return e.stop()}},Ht,this)}var zt=Bt,Kt=Xe.a.mark(Xt),Jt=Xe.a.mark(Wt);function Xt(e){var t,n,a;return Xe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log("trying to save token \n\n",e),r.prev=1,t=nt()){r.next=7;break}return r.next=6,Object($e.a)(C());case 6:return r.abrupt("return");case 7:return console.log("saving token: ",e),r.next=10,tt.a.put(qe,{token:e.payload},{headers:{Authorization:"Bearer "+t}});case 10:return n=r.sent,r.next=13,Object($e.a)(V.saveTokenSuccess(n.data.token));case 13:if(r.prev=13,""===n.data.token){r.next=20;break}return r.next=17,tt.a.get(Qe,{headers:{Authorization:"Bearer "+n.data.token}});case 17:return a=r.sent,r.next=20,Object($e.a)(V.tokenVerificationSuccess(a.data.channels[0].displayName));case 20:r.next=26;break;case 22:return r.prev=22,r.t0=r.catch(13),r.next=26,Object($e.a)(V.tokenVerificationFailed({error:r.t0}));case 26:r.next=33;break;case 28:return r.prev=28,r.t1=r.catch(1),console.log("error saving token",r.t1),r.next=33,Object($e.a)(V.saveTokenFailed({error:r.t1}));case 33:case"end":return r.stop()}},Kt,this,[[1,28],[13,22]])}function Wt(){return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($e.b)(V.saveToken,Xt);case 2:case"end":return e.stop()}},Jt,this)}var Zt,Yt=Wt,qt=n(110),Gt=Object(j.createReducer)((Zt={},Object(De.a)(Zt,x.notAuthenticated,function(e,t){return{view:"authentication"}}),Object(De.a)(Zt,x.authenticationSuccess,function(e,t){return{view:"authentication"}}),Object(De.a)(Zt,Ce.navigateTo,function(e,t){return{view:t}}),Zt),{view:"authentication"}),Qt=Object(Ke.a)(),$t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Se.d,en=Object(Se.e)(Object(Se.c)({authentication:Re,media:Le,form:qt.a,environment:Pe.a,chatControls:Be,navigator:Gt,streamElements:ze}),$t(Object(Se.a)(Qt)));Qt.run(ot),Qt.run(mt),Qt.run(_t),Qt.run(Ft),Qt.run(yt),Qt.run(kt),Qt.run(Vt),Qt.run(zt),Qt.run(Yt),c.a.render(r.a.createElement(m.a,{store:en},r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},25:function(e,t,n){e.exports={welcomePanel:"authentication_welcomePanel__1wBwi",offline:"authentication_offline__7xwU6",accountInformation:"authentication_accountInformation__2wSAk",userName:"authentication_userName__2tP9n",information:"authentication_information__ABg6x",profilePicture:"authentication_profilePicture__2PzaC"}},27:function(e,t){e.exports=require("electron")},28:function(e,t,n){e.exports={mediaPanel:"media_mediaPanel__3kEcI",mediaList:"media_mediaList__1lD0Z",mediaLoading:"media_mediaLoading__2JjTq"}},30:function(e,t,n){e.exports={navigator:"navigator_navigator__2Uj2s",viewPicker:"navigator_viewPicker__3mOPo",navigationItem:"navigator_navigationItem__3G0UX"}},32:function(e,t,n){e.exports={token:"stream-elements_token__Z7Zsh",tokenForm:"stream-elements_tokenForm__1n2BM",hidden:"stream-elements_hidden__1ClwK",buttons:"stream-elements_buttons__EjnYx"}},40:function(e,t,n){e.exports={loader:"spinner_loader__gzHBd",circular:"spinner_circular__1p6hi",rotate:"spinner_rotate__3hcLg",path:"spinner_path__2R4t0",dash:"spinner_dash__2ZQiY",color:"spinner_color__2evoP"}},44:function(e,t,n){e.exports={appView:"app-view_appView__1J9QT",appViewHidden:"app-view_appViewHidden__1kgJ4"}},45:function(e,t,n){e.exports={mediaRemote:"media-remote_mediaRemote__1sZdb",mediaItem:"media-remote_mediaItem__2gXs3"}},46:function(e,t,n){e.exports={chatControls:"chat-controls_chatControls__2w4-N"}},59:function(e,t){var n={isElectron:"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0};e.exports=function(){return n}},62:function(e,t,n){e.exports=n(108)},67:function(e,t,n){},86:function(e,t,n){}},[[62,2,1]]]);
//# sourceMappingURL=main.07df9776.chunk.js.map